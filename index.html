<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Digital Library Management System</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
    :root {
        --bg-color: #0a0a0a;
        --card-color: #1a1a1a;
        --nav-color: #111;
        --text-color: #f0f0f0;
        --accent-color: tomato; 
        --accent-hover: #ff4500;
        --continent-color: #ffd700; /* Gold for Continents */
        --continent-hover: #ffea00;
        --highlight-color: #00cc44; 
        --shadow: 0 10px 20px rgba(0,0,0,0.5);
    }

    html {
        scroll-behavior: smooth;
    }

    body {
        margin: 0;
        font-family: 'Poppins', sans-serif;
        background-color: var(--bg-color);
        color: var(--text-color);
        line-height: 1.6;
        overflow-x: hidden;
    }

    /* --- HEADER/NAVBAR --- */
    nav {
        background: rgba(10,10,10,0.85);
        backdrop-filter: blur(10px);
        padding: 15px 50px;
        position: sticky;
        top: 0;
        z-index: 1000;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 2px solid var(--accent-color);
        box-shadow: 0 8px 25px rgba(0,0,0,0.7);
        transition: 0.3s;
    }

    nav:hover {
        box-shadow: 0 12px 30px rgba(0,0,0,0.9);
    }

    @keyframes gradientShift {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }

    .logo {
        font-size: 2.4rem;
        font-weight: 900;
        background: linear-gradient(270deg, #00ff99, #00ccff, #ff00ff, #ffdd00);
        background-size: 600% 600%;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        letter-spacing: 2.5px;
        text-transform: uppercase;
        text-shadow: 0 0 10px rgba(0,0,0,0.6);
        cursor: pointer;
        animation: gradientShift 8s ease infinite;
        transition: transform 0.3s ease, text-shadow 0.3s ease;
        text-decoration: none;
    }

    .logo:hover {
        transform: scale(1.15);
        text-shadow: 0 0 20px rgba(0,255,255,0.8);
    }

    .nav-links {
        list-style: none;
        display: flex;
        gap: 30px;
        margin: 0;
        padding: 0;
    }

    .nav-links a {
        color: #ccc;
        text-decoration: none;
        font-weight: 600;
        font-size: 1rem;
        position: relative;
        padding: 5px 0;
        transition: 0.3s;
    }

    .nav-links a::after {
        content: '';
        position: absolute;
        width: 0%;
        height: 2px;
        bottom: 0;
        left: 0;
        background: var(--accent-color);
        transition: width 0.3s;
    }

    .nav-links a:hover::after {
        width: 100%;
    }

    .nav-links a:hover {
        color: var(--accent-color);
    }

    /* --- HERO SECTION --- */
   
    
    .hero {
    height: 80vh;
    background: linear-gradient(rgba(0,0,0,0.75), rgba(0,0,0,0.75)), 
    url('https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?auto=format&fit=crop&q=80&w=1920');
    background-size: cover;
    background-position: center;
    }

    .hero h1 {
        font-size: 3.5rem;
        margin-bottom: 20px;
        text-shadow: 2px 2px 10px rgba(0,0,0,0.8);
    }

    .hero p {
        font-size: 1.2rem;
        max-width: 700px;
        margin-bottom: 30px;
        color: #ddd;
    }

    .cta-btn {
        background-color: var(--accent-color);
        color: white;
        padding: 15px 30px;
        text-decoration: none;
        border-radius: 5px;
        font-weight: bold;
        font-size: 1.1rem;
        transition: 0.3s;
    }

    .cta-btn:hover {
        background-color: var(--accent-hover);
        transform: translateY(-3px);
    }

    .section-title {
        text-align: center;
        font-size: 2.5rem;
        margin-top: 80px;
        margin-bottom: 40px;
        color: var(--accent-color);
        text-transform: uppercase;
        letter-spacing: 2px;
    }

    /* --- FEATURES --- */
    .features {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 30px;
        padding: 20px;
        max-width: 1200px;
        margin: 0 auto;
    }

    .feature-box {
        background-color: var(--card-color);
        padding: 30px;
        border-radius: 10px;
        width: 300px;
        text-align: center;
        border: 1px solid #333;
        transition: 0.3s;
    }

    .feature-box:hover {
        border-color: var(--highlight-color);
        transform: translateY(-5px);
    }

    .feature-box h3 { color: var(--highlight-color); }

    /* --- FILTER SECTION --- */
    .filter-section {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
        margin-bottom: 30px;
    }

    /* Main Tabs (Red) */
    .main-tabs {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 10px;
    }

    .main-btn {
        background-color: transparent;
        border: 2px solid var(--accent-color);
        color: var(--accent-color);
        padding: 10px 25px;
        border-radius: 25px;
        cursor: pointer;
        font-weight: 600;
        transition: 0.3s;
        font-family: 'Poppins', sans-serif;
        font-size: 1rem;
        text-decoration: none; /* Added for the link button */
    }

    .main-btn:hover, .main-btn.active {
        background-color: var(--accent-color);
        color: white;
        transform: scale(1.05);
        box-shadow: 0 0 15px rgba(255, 99, 71, 0.6);
    }

    /* Sub Tabs (Gold) - The "World Books" Folder Contents */
    .sub-tabs {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 8px;
        animation: fadeIn 0.5s ease-in-out;
    }

    .sub-btn {
        background-color: transparent;
        border: 1px solid var(--continent-color);
        color: var(--continent-color);
        padding: 6px 20px;
        border-radius: 20px;
        cursor: pointer;
        font-weight: 600;
        transition: 0.3s;
        font-family: 'Poppins', sans-serif;
        font-size: 0.9rem;
    }

    .sub-btn:hover, .sub-btn.active {
        background-color: var(--continent-color);
        color: black;
        transform: scale(1.05);
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(-10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    /* --- BOOKS SECTION --- */
    .search-container { text-align: center; margin-bottom: 30px; }

    #searchInput {
        width: 60%;
        max-width: 500px;
        padding: 15px;
        border-radius: 30px;
        border: 2px solid #333;
        background-color: #1a1a1a;
        color: white;
        font-size: 1rem;
        outline: none;
        transition: 0.3s;
    }

    #searchInput:focus {
        border-color: var(--accent-color);
        box-shadow: 0 0 10px rgba(255, 99, 71, 0.5);
    }

    .container {
        max-width: 1400px;
        margin: 0 auto 50px auto;
        padding: 0 20px;
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
        gap: 30px;
    }

    .book-card {
        background-color: var(--card-color);
        border-radius: 15px;
        box-shadow: var(--shadow);
        overflow: hidden;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        display: flex;
        flex-direction: column;
        position: relative;
        border: 1px solid #333;
    }

    .book-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 30px rgba(0,0,0,0.6);
        border-color: var(--accent-color);
    }

    .category-badge {
        position: absolute;
        top: 10px;
        right: 10px;
        background-color: var(--highlight-color);
        color: black;
        padding: 5px 10px;
        border-radius: 20px;
        font-size: 0.7rem;
        font-weight: bold;
        z-index: 2;
    }

    /* Continent Badge (Hidden by default, shown if needed) */
    .continent-badge {
        position: absolute;
        top: 10px;
        left: 10px;
        background-color: var(--continent-color);
        color: black;
        padding: 5px 10px;
        border-radius: 20px;
        font-size: 0.7rem;
        font-weight: bold;
        z-index: 2;
        display: none; /* Hidden by default unless filtering by world */
    }

    .book-card img {
        width: 100%;
        height: 320px;
        object-fit: cover;
        border-bottom: 1px solid #333;
    }

    .book-details {
        padding: 15px;
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }

    .book-details h3 {
        margin: 0 0 10px 0;
        font-size: 1.1rem;
        color: var(--highlight-color); 
        line-height: 1.4;
    }

    .book-info { font-size: 0.85rem; color: #aaa; margin-bottom: 15px; }

    .view-btn {
        background-color: var(--accent-color);
        color: white;
        border: none;
        padding: 10px;
        width: 100%;
        border-radius: 8px;
        cursor: pointer;
        transition: background 0.2s;
        font-size: 0.95rem;
        font-weight: 600;
    }

    .view-btn:hover { background-color: var(--accent-hover); }

    /* --- ABOUT & CONTACT --- */
    .text-section { max-width: 800px; margin: 0 auto 60px auto; text-align: center; padding: 0 20px; color: #ccc; }
    
    .contact-wrapper {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 40px;
        padding: 20px;
    }

    .contact-info { flex: 1; min-width: 300px; }
    .contact-info h3 { color: var(--accent-color); margin-bottom: 20px; }

    .contact-form {
        flex: 1;
        min-width: 300px;
        max-width: 500px;
        background-color: var(--card-color);
        padding: 30px;
        border-radius: 10px;
        border: 1px solid #333;
    }

    .contact-form input, .contact-form textarea {
        width: 100%;
        padding: 12px;
        margin-bottom: 15px;
        background-color: #0a0a0a;
        border: 1px solid #333;
        color: white;
        border-radius: 5px;
        box-sizing: border-box;
    }

    .submit-btn {
        width: 100%;
        padding: 12px;
        background-color: var(--highlight-color);
        border: none;
        font-weight: bold;
        cursor: pointer;
        border-radius: 5px;
    }

    /* --- FOOTER --- */
    footer {
        background-color: #050505;
        padding: 40px 20px;
        text-align: center;
        border-top: 1px solid #222;
        color: #666;
    }

    /* --- MODAL --- */
    .modal {
        display: none; 
        position: fixed; 
        z-index: 2500; 
        left: 0;
        top: 0;
        width: 100%; 
        height: 100%; 
        overflow: auto;
        background-color: rgba(0,0,0,0.85);
        backdrop-filter: blur(5px);
    }

    .modal-content {
        background-color: #1a1a1a;
        margin: 5% auto;
        padding: 30px;
        border-radius: 15px;
        max-width: 600px;
        position: relative;
        text-align: center;
        border: 1px solid #444;
        color: #fff;
        animation: fadeIn 0.3s;
    }

    .close-btn {
        position: absolute;
        top: 15px;
        right: 20px;
        font-size: 2rem;
        cursor: pointer;
        color: #888;
    }
    .close-btn:hover { color: var(--accent-color); }

    .modal-content img {
        width: 200px;
        height: 300px;
        object-fit: cover;
        margin-bottom: 20px;
        border-radius: 5px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.5);
    }

    .modal-details h2 { color: var(--accent-color); margin-bottom: 5px; }
    .modal-details h4 { color: #ccc; font-weight: 400; margin-top: 0; }
    .modal-details p { color: #aaa; line-height: 1.6; font-size: 0.95rem; }

    .read-link {
        display: inline-block;
        margin-top: 20px;
        padding: 12px 25px;
        background-color: var(--highlight-color);
        color: #000;
        text-decoration: none;
        border-radius: 5px;
        font-weight: bold;
        transition: transform 0.2s;
        cursor: pointer;
    }
    .read-link:hover { transform: scale(1.05); background-color: #00e65c; }

    /* Mobile Responsive */
    @media(max-width: 768px) {
        .nav-links { display: none; }
        .hero h1 { font-size: 2.5rem; }
        .container { grid-template-columns: 1fr; }
        .main-btn, .sub-btn { font-size: 0.85rem; padding: 8px 15px; }
    }
</style>
</head>
<body>

<!-- NAVIGATION -->
<nav>
    <a href="#home" class="logo">DigitalLibrary</a>
    <ul class="nav-links">
        <li><a href="#home">Home</a></li>
        <li><a href="#features">Features</a></li>
        <li><a href="#books">Browse Books</a></li>
        <li><a href="about us.html">About Us</a></li>
        <li><a href="#contact">Contact</a></li>
    </ul>
</nav>

<!-- HERO SECTION -->
<section id="home" class="hero">
    <div class="hero-content">
        <h1>üìö Read Without Limits</h1>
        <p>
            Explore a world of knowledge inside our modern digital library.  
            Discover novels, science books, motivational texts and more ‚Äî all in one place.
        </p>
        <a href="#books" class="cta-btn">Start Reading</a>
    </div>
</section>


<!-- FEATURES SECTION -->
<section id="features">
    <h2 class="section-title">Why Choose Us?</h2>
    <div class="features">
        <div class="feature-box">
            <h3>üìö Vast Collection</h3>
            <p>From classic novels to modern science, we have books for every interest.</p>
        </div>
        <div class="feature-box">
            <h3>üöÄ Fast Access</h3>
            <p>Click "Read" and the book opens directly for you to enjoy.</p>
        </div>
        <div class="feature-box">
            <h3>üÜì Completely Free</h3>
            <p>Our mission is to spread knowledge. Access our library without any cost.</p>
        </div>
    </div>
</section>

<!-- BOOKS SECTION -->
<section id="books">
    <h2 class="section-title">Browse Books</h2>
    
    <!-- MAIN TABS (The "Folders") -->
    <div class="filter-section">
        <div class="main-tabs" id="mainTabs">
            <button class="main-btn active" onclick="switchMainTab('genre', 'All', this)">All Genres</button>
            <button class="main-btn" onclick="switchMainTab('genre', 'Novel', this)">Novels</button>
            <button class="main-btn" onclick="switchMainTab('genre', 'Motivation', this)">Motivation</button>
            <button class="main-btn" onclick="switchMainTab('genre', 'Science', this)">Science</button>
            <button class="main-btn" onclick="switchMainTab('genre', 'Learning English', this)">Learning English</button>
             <!-- THE WORLD BOOKS FOLDER -->
           <a href="cartoon.html" class="main-btn" style="text-decoration:none; color:inherit;">World Books</a>
        </div>

        <!-- SUB TABS (Dynamic content based on folder) -->
        <div id="subTabsContainer" class="sub-tabs">
            <!-- Buttons will be injected here by JS -->
        </div>
    </div>

    <div class="search-container">
        <input type="text" id="searchInput" placeholder="Search within selected folder...">
    </div>

    <div class="container" id="booksContainer">
        <!-- Books will appear here dynamically -->
    </div>
</section>

<!-- CONTACT SECTION -->
<section id="contact">
    <h2 class="section-title">Contact Us</h2>
    <div class="contact-wrapper">
        <div class="contact-info">
            <h3>Get in Touch</h3>
            <p>Have a suggestion or found a broken link? Fill out the form on the right.</p>
            <p>üìç Kigali, Rwanda</p>
            <p>üìß info@digitallibrary.rw</p>
            <p>üìû +250 7293848</p>
        </div>
      <div class="contact-form">
    <form action="https://formspree.io/f/mojnvwpr" method="POST">
        
        <input type="text" name="name" placeholder="Your Name" required>

        <input type="email" name="email" placeholder="Your Email" required>

        <textarea name="message" rows="5" placeholder="Your Message" required></textarea>

        <button type="submit" class="submit-btn">Send Message</button>

    </form>
</div>

    </div>
</section>

<!-- FOOTER -->
<footer>
    <p>&copy; 2026 Digital Library Management System. All rights reserved.</p>
</footer>

<!-- MODAL STRUCTURE -->
<div id="bookModal" class="modal">
    <div class="modal-content">
        <span class="close-btn" onclick="closeModal()">&times;</span>
        <div id="modal-body">
            <!-- Content injected via JS -->
        </div>
    </div>
</div>

<script>
// Image Assets
const imgNovel = "https://images.unsplash.com/photo-1544947950-fa07a98d237f?auto=format&fit=crop&q=80&w=400";
const imgMotivation = "https://images.unsplash.com/photo-1506784983877-45594efa4cbe?auto=format&fit=crop&q=80&w=400";
const imgScience = "https://images.unsplash.com/photo-1532094349884-543bc11b234d?auto=format&fit=crop&q=80&w=400";
const imgEnglish = "https://images.unsplash.com/photo-1455390582262-044cdead277a?auto=format&fit=crop&q=80&w=400";

// CLEANED BOOK DATABASE
const books = [
    // --- NOVELS ---
    {title:"1984", author:"George Orwell", year:"1949", category:"Novel", continent:"Europe", desc:"A dystopian novel about totalitarianism.", img: imgNovel, readUrl:"https://www.gutenberg.org/files/7370/7370-h/7370-h.htm"},
    {title:"Pride and Prejudice", author:"Jane Austen", year:"1813", category:"Novel", continent:"Europe", desc:"A romantic novel of manners.", img: imgNovel, readUrl:"https://www.gutenberg.org/files/1342/1342-h/1342-h.htm"},
    {title:"The Adventures of Sherlock Holmes", author:"Arthur Conan Doyle", year:"1892", category:"Novel", continent:"Europe", desc:"Stories of the famous detective.", img: imgNovel, readUrl:"https://www.gutenberg.org/files/1661/1661-h/1661-h.htm"},
    {title:"Moby Dick", author:"Herman Melville", year:"1851", category:"Novel", continent:"North America", desc:"The obsessive quest of Captain Ahab.", img: imgNovel, readUrl:"https://www.gutenberg.org/files/2701/2701-h/2701-h.htm"},
    {title:"Alice's Adventures in Wonderland", author:"Lewis Carroll", year:"1865", category:"Novel", continent:"Europe", desc:"A girl falls into a fantasy world.", img: imgNovel, readUrl:"https://www.gutenberg.org/files/11/11-h/11-h.htm"},
    
    // --- MOTIVATION ---
    {title:"As a Man Thinketh", author:"James Allen", year:"1903", category:"Motivation", continent:"Europe", desc:"On the power of thought.", img: imgMotivation, readUrl:"https://www.gutenberg.org/files/5658/5658-h/5658-h.htm"},
    {title:"Think and Grow Rich", author:"Napoleon Hill", year:"1937", category:"Motivation", continent:"North America", desc:"Classic self-help on success.", img: imgMotivation, readUrl:"https://www.gutenberg.org/files/53424/53424-h/53424-h.htm"},
    {title:"Meditations", author:"Marcus Aurelius", year:"180", category:"Motivation", continent:"Europe", desc:"Personal writings of Roman Emperor.", img: imgMotivation, readUrl:"https://www.gutenberg.org/files/2680/2680-h/2680-h.htm"},
    {title:"Self-Reliance", author:"Ralph Waldo Emerson", year:"1841", category:"Motivation", continent:"North America", desc:"Trust your intuition.", img: imgMotivation, readUrl:"https://www.gutenberg.org/files/16643/16643-h/16643-h.htm"},

    // --- SCIENCE ---
    {title:"Flatland", author:"Edwin A. Abbott", year:"1884", category:"Science", continent:"Europe", desc:"A romance of many dimensions.", img: imgScience, readUrl:"https://www.gutenberg.org/files/201/201-h/201-h.htm"},
    {title:"On the Origin of Species", author:"Charles Darwin", year:"1859", category:"Science", continent:"Europe", desc:"Theory of evolution.", img: imgScience, readUrl:"https://www.gutenberg.org/files/2009/2009-h/2009-h.htm"},
    {title:"The Chemical History of a Candle", author:"Michael Faraday", year:"1861", category:"Science", continent:"Europe", desc:"Lectures on chemistry and physics of flames.", img: imgScience, readUrl:"https://www.gutenberg.org/files/22644/22644-h/22644-h.htm"},
    {title:"Six Easy Pieces", author:"Richard Feynman", year:"1994", category:"Science", continent:"North America", desc:"Essentials of physics explained.", img: imgScience, readUrl:"https://archive.org/details/SixEasyPiecesFeynman"},

    // --- LEARNING ENGLISH ---
    {title:"English Grammar", author:"Gould Brown", year:"1851", category:"Learning English", continent:"North America", desc:"Comprehensive guide to English grammar.", img: imgEnglish, readUrl:"https://www.gutenberg.org/files/38984/38984-h/38984-h.htm"},
    {title:"Word Power Made Easy", author:"Norman Lewis", year:"1949", category:"Learning English", continent:"Asia", desc:"Vocabulary building system.", img: imgEnglish, readUrl:"https://archive.org/details/WordPowerMadeEasyNormanLewis"},
    {title:"The Elements of Style", author:"William Strunk Jr.", year:"1918", category:"Learning English", continent:"North America", desc:"Classic writing style guide.", img: imgEnglish, readUrl:"https://www.gutenberg.org/files/37134/37134-h/37134-h.htm"},
    {title:"Practical English", author:"T. O. Cone", year:"1904", category:"Learning English", continent:"North America", desc:"Lessons in speaking and writing English.", img: imgEnglish, readUrl:"https://www.gutenberg.org/files/18047/18047-h/18047-h.htm"}
];

// State variables
let currentMode = 'genre'; // 'genre' or 'world'
let currentFilterValue = 'All';
const container = document.getElementById('booksContainer');
const subTabsContainer = document.getElementById('subTabsContainer');
const searchInput = document.getElementById('searchInput');

// --- MAIN TAB LOGIC (The Folder Logic) ---
function switchMainTab(mode, value, btnElement) {
    currentMode = mode;
    currentFilterValue = value;

    // Update Main Button Styling
    const buttons = document.querySelectorAll('.main-btn');
    buttons.forEach(btn => btn.classList.remove('active'));
    btnElement.classList.add('active');

    // Clear sub-tabs
    subTabsContainer.innerHTML = '';

    // Logic based on Mode
    if (mode === 'world') {
        // OPEN WORLD BOOKS FOLDER: Show Continents
        renderSubTabs('continent');
        // Apply filters (Initial World view shows All Continents)
        applyFilters();
    } else {
        // GENRE MODE: Hide sub-tabs, just filter by genre
        applyFilters();
    }
}

// --- SUB TAB LOGIC (Rendering the folder contents) ---
function renderSubTabs(type) {
    let items = [];
    if (type === 'continent') {
        items = ['All', 'Africa', 'Asia', 'Europe', 'North America', 'South America', 'Australia', 'Antarctica'];
    }

    items.forEach(item => {
        const btn = document.createElement('button');
        btn.className = 'sub-btn';
        if (item === 'All') btn.classList.add('active');
        btn.innerText = item;
        btn.onclick = function() {
            // Update styling
            document.querySelectorAll('.sub-btn').forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            
            // Update Filter
            currentFilterValue = item;
            applyFilters();
        };
        subTabsContainer.appendChild(btn);
    });
}

// --- APPLY FILTERS ---
function applyFilters() {
    let result = books;

    if (currentMode === 'genre') {
        // Filter by Genre
        if (currentFilterValue !== 'All') {
            result = result.filter(book => book.category === currentFilterValue);
        }
    } else if (currentMode === 'world') {
        // Filter by Continent
        if (currentFilterValue !== 'All') {
            result = result.filter(book => book.continent === currentFilterValue);
        }
    }

    renderBooks(result, currentMode);
}

// Render Books Function
function renderBooks(booksToRender, mode) {
    container.innerHTML = "";
    if(booksToRender.length === 0) {
        container.innerHTML = "<p style='text-align:center; width:100%; color:#666; grid-column: 1/-1; font-size:1.2rem;'>No books found in this folder.</p>";
        return;
    }

    booksToRender.forEach(book => {
        const card = document.createElement('div');
        card.classList.add('book-card');
        
        // Decide which badges to show
        let continentBadgeHTML = '';
        if (mode === 'world') {
            continentBadgeHTML = `<span class="continent-badge" style="display:block">${book.continent}</span>`;
        }

        card.innerHTML = `
            ${continentBadgeHTML}
            <span class="category-badge">${book.category}</span>
            <img src="${book.img}" alt="${book.title}">
            <div class="book-details">
                <div>
                    <h3>${book.title}</h3>
                    <div class="book-info">
                        <p><strong>Author:</strong> ${book.author}</p>
                        <p><strong>Year:</strong> ${book.year}</p>
                    </div>
                </div>
                <button class="view-btn" onclick='openModal(${JSON.stringify(book)})'>View Details</button>
            </div>
        `;
        container.appendChild(card);
    });
}

// Search Logic
searchInput.addEventListener('keyup', (e) => {
    const searchString = e.target.value.toLowerCase();
    
    // Re-apply current main filters first
    let baseList = books;
    if (currentMode === 'genre' && currentFilterValue !== 'All') {
        baseList = baseList.filter(book => book.category === currentFilterValue);
    } else if (currentMode === 'world' && currentFilterValue !== 'All') {
        baseList = baseList.filter(book => book.continent === currentFilterValue);
    }

    // Apply search text
    const filteredBooks = baseList.filter((book) => {
        return (
            book.title.toLowerCase().includes(searchString) || 
            book.author.toLowerCase().includes(searchString)
        );
    });
    renderBooks(filteredBooks, currentMode);
});

// Sidebar Reader Logic - UPDATED TO FIX ISSUE
// Kuko amasoko nka Gutenberg arinda iframe, dufungura muri Window nshya
function openSideReader(url, title) {
    // Fungura url muri tab nshya ya browser
    window.open(url, '_blank');
    
    // Ohereza ubutumwa bw'incenge (Optional - simple alert)
    // Twiyemeje gufungura Modal ishyizeho "Reading Mode"
    // None ho bivuze ko Modal isigara ifunguye ariko isoma ibintu bitari ibyo
}

// Modal Logic
function openModal(book) {
    const modalBody = document.getElementById('modal-body');
    modalBody.innerHTML = `
        <img src="${book.img}" alt="Book Cover">
        <div class="modal-details">
            <h2>${book.title}</h2>
            <h4>By ${book.author} (${book.year})</h4>
            <p><strong>Category:</strong> ${book.category}</p>
            <p><strong>Continent:</strong> ${book.continent}</p>
            <br>
            <p>${book.desc}</p>
            <div class="read-link" onclick="openSideReader('${book.readUrl}', '${book.title}')">Read Book Now</div>
        </div>
    `;
    document.getElementById('bookModal').style.display = "block";
}

function closeModal() {
    document.getElementById('bookModal').style.display = "none";
}

window.onclick = function(event) {
    let modal = document.getElementById('bookModal');
    if(event.target == modal) {
        modal.style.display = "none";
    }
}

// Initial Load
renderBooks(books, 'genre');
</script>

</body>
</html>